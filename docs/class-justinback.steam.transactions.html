<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class justinback\steam\transactions | SteamPHP</title>

	<link rel="stylesheet" href="resources/bootstrap.min.css?973e37a8502921d56bc02bb55321f45b072b6f71">
	<link rel="stylesheet" href="resources/style.css?70c1d062672daa3f906b72e4f5d03d4bc5c4174d">

</head>

<body>
	<nav id="navigation" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<a href="index.html" class="navbar-brand">SteamPHP</a>
			</div>
			<div class="collapse navbar-collapse">

                <form id="search" class="navbar-form navbar-left" role="search">
                    <input type="hidden" name="cx" value="">
                    <input type="hidden" name="ie" value="UTF-8">
                    <div class="form-group">
                        <input type="text" name="q" class="search-query form-control" placeholder="Search">
					</div>
				</form>

				<ul class="nav navbar-nav">
					<li>
						<a href="namespace-justinback.steam.html" title="Summary of justinback\steam"><span>Namespace</span></a>
					</li>
					<li class="active">
<span>Class</span>					</li>

					<li class="divider-vertical"></li>

					<li>
						<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
					</li>

						<li>
							<a href="annotation-group-deprecated.html" title="List of elements with deprecated annotation">
								<span>Deprecated</span>
							</a>
						</li>
						<li>
							<a href="annotation-group-todo.html" title="List of elements with todo annotation">
								<span>Todo</span>
							</a>
						</li>


				</ul>
			</div>
		</div>
	</nav>

	<div id="left">
	<div id="menu">

		<div id="groups">
				<h3>Namespaces</h3>
			<ul>
					<li class="active">
						<a href="namespace-justinback.html">
							justinback<span></span>
						</a>
							<ul>
					<li class="active">
						<a href="namespace-justinback.steam.html">
							steam<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-justinback.steam.exceptions.html">
							exceptions						</a>
							</li>
								</ul></li></ul></li>
					<li>
						<a href="namespace-PHP.html">
							PHP						</a>
							</li>
			</ul>
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-justinback.steam.achievements.html">achievements</a></li>
				<li><a href="class-justinback.steam.anticheat.html">anticheat</a></li>
				<li><a href="class-justinback.steam.game.html">game</a></li>
				<li><a href="class-justinback.steam.group.html">group</a></li>
				<li><a href="class-justinback.steam.inventory.html">inventory</a></li>
				<li><a href="class-justinback.steam.item.html">item</a></li>
				<li><a href="class-justinback.steam.iteminfo.html">iteminfo</a></li>
				<li><a href="class-justinback.steam.leaderboards.html">leaderboards</a></li>
				<li><a href="class-justinback.steam.manager.html">manager</a></li>
				<li><a href="class-justinback.steam.player.html">player</a></li>
				<li><a href="class-justinback.steam.steam.html">steam</a></li>
				<li><a href="class-justinback.steam.store.html">store</a></li>
				<li class="active"><a href="class-justinback.steam.transactions.html">transactions</a></li>
				<li><a href="class-justinback.steam.ugc.html">ugc</a></li>
				<li><a href="class-justinback.steam.userauth.html">userauth</a></li>
				<li><a href="class-justinback.steam.utils.html">utils</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class transactions</h1>


	<div class="description">
	<p>Steam Microtransaction managing</p>
	</div>









	<div class="alert alert-info">
		
		
		<b>Namespace:</b> <a href="namespace-justinback.html">justinback</a>\<a href="namespace-justinback.steam.html">steam</a><br>
		

				<b>Author:</b>
				Justin Back <a href="&#109;&#x61;&#105;&#x6c;&#116;&#111;&#x3a;&#106;&#x62;&#64;&#x6a;u&#115;&#x74;&#105;&#x6e;&#98;&#x61;&#x63;&#107;&#x2e;&#99;&#x6f;m">&#106;&#x62;&#64;&#x6a;u&#115;&#x74;&#105;&#x6e;&#98;&#x61;&#x63;&#107;&#x2e;&#99;&#x6f;m</a><br>
				<b>Since:</b>
				pb1.0.0a<br>
			<b>Located at</b> <a href="source-class-justinback.steam.transactions.html#10-417" title="Go to source code">class/transactions.php</a>
		<br>
	</div>



		<div class="panel panel-default">
			<div class="panel-heading"><h2>Methods summary</h2></div>
			<table class="summary table table-bordered table-striped methods" id="methods">
		<tr data-order="__construct" id="___construct">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#___construct">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#71-91" title="Go to source code">__construct</a>( <span>string <var>$bTesting</var> = <span class="php-keyword1">false</span></span>, <span>string <var>$sApiKey</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$iGame</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$sSteamid</var> = <span class="php-keyword1">null</span></span> )</code>

			<div class="description short">
				<p>Construction of the variables steamid, key and game</p>
			</div>

			<div class="description detailed hidden">
				<p>Construction of the variables steamid, key and game</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$bTesting</var></dt>
						<dd>Sandbox or Production environment?</dd>
						<dt><var>$sApiKey</var></dt>
						<dd>Steamworks Developer API Key</dd>
						<dt><var>$iGame</var></dt>
						<dd>Your Appid</dd>
						<dt><var>$sSteamid</var></dt>
						<dd>The SteamID of the user</dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="AdjustAgreement" id="_AdjustAgreement">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_AdjustAgreement">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#129-155" title="Go to source code">AdjustAgreement</a>( <span>string <var>$sNextProcessDate</var></span> )</code>

			<div class="description short">
				<p>Add time to the payment schedule of an agreement with billing type "steam".</p>
			</div>

			<div class="description detailed hidden">
				<p>Add time to the payment schedule of an agreement with billing type "steam".</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$sNextProcessDate</var></dt>
						<dd>Date that next recurring payment should be initiated. Format is YYYYMMDD. Date can only be adjusted forward indicating you want to add time to the subscription. If the date exceeds the end date of the subscription, the end date will be extended.</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean<br>object
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="CancelAgreement" id="_CancelAgreement">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_CancelAgreement">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#157-182" title="Go to source code">CancelAgreement</a>( )</code>

			<div class="description short">
				<p>Cancels a recurring billing agreement (subscription).</p>
			</div>

			<div class="description detailed hidden">
				<p>Cancels a recurring billing agreement (subscription).</p>



					<h4>Returns</h4>
					<div class="list">
						boolean<br>object
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="RefundTxn" id="_RefundTxn">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_RefundTxn">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#184-209" title="Go to source code">RefundTxn</a>( )</code>

			<div class="description short">
				<p>Tells Steam to refund a user for a purchase. Refunds can only be made for the full value of the original order.</p>
			</div>

			<div class="description detailed hidden">
				<p>Tells Steam to refund a user for a purchase. Refunds can only be made for the full value of the original order.</p>



					<h4>Returns</h4>
					<div class="list">
						boolean<br>object
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="FinalizeTxn" id="_FinalizeTxn">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_FinalizeTxn">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#211-239" title="Go to source code">FinalizeTxn</a>( )</code>

			<div class="description short">
				<p>Completes a purchase that was started by the InitTxn API.</p>
			</div>

			<div class="description detailed hidden">
				<p>Completes a purchase that was started by the InitTxn API.</p>

<p>This command will capture funds for a transaction and should only be called after the user has authorized the transaction and you have received notification that the authorization was successful. Notification of authorization comes either through the Steam client (your game registers to receive notification) or through the user being redirected back to your web site (return URL specified when you redirect a user's web session to Steam). The usersession value specified in InitTxn determines the notification mechanism.
A successful response to this command means payment has been completed and you can safely grant items to the user. In the event of a timeout or some other communication error, use either the QueryTxn or GetReport APIs to get status on the transaction.</p>



					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="QueryTxn" id="_QueryTxn">

			<td class="attributes"><code>
				 public 
				object
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_QueryTxn">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#241-262" title="Go to source code">QueryTxn</a>( )</code>

			<div class="description short">
				<p>Query the status of an order that was previously created with InitTxn.</p>
			</div>

			<div class="description detailed hidden">
				<p>Query the status of an order that was previously created with InitTxn.</p>



					<h4>Returns</h4>
					<div class="list">
						object
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="GetUserAgreementInfo" id="_GetUserAgreementInfo">

			<td class="attributes"><code>
				 public 
				object
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_GetUserAgreementInfo">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#264-285" title="Go to source code">GetUserAgreementInfo</a>( )</code>

			<div class="description short">
				<p>Get detailed information of all recurring billing agreements (subscriptions) for a user.</p>
			</div>

			<div class="description detailed hidden">
				<p>Get detailed information of all recurring billing agreements (subscriptions) for a user.</p>



					<h4>Returns</h4>
					<div class="list">
						object
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="InitTxn" id="_InitTxn">

			<td class="attributes"><code>
				 public 
				<code><a href="class-justinback.steam.transactions.html">justinback\steam\transactions</a></code>
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_InitTxn">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#287-339" title="Go to source code">InitTxn</a>( <span>integer <var>$iItemCount</var></span>, <span>string <var>$sLanguage</var></span>, <span>string <var>$sCurrency</var></span>, <span>integer <var>$iItemID</var></span>, <span>integer <var>$iQuantity</var></span>, <span>integer <var>$iAmount</var></span>, <span>string <var>$sDescription</var></span>, <span>string <var>$sUserSession</var> = <span class="php-quote">&quot;client&quot;</span></span>, <span>string <var>$sIpAddress</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$sBillingType</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$sStartDate</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$sEndDate</var> = <span class="php-keyword1">null</span></span>, <span>string <var>$sPeriod</var> = <span class="php-keyword1">null</span></span>, <span>integer <var>$iRecurringAmount</var> = <span class="php-keyword1">null</span></span>, <span>integer <var>$iFrequency</var> = <span class="php-keyword1">null</span></span> )</code>

			<div class="description short">
				<p>Creates a new purchase. Send the order information along with the Steam ID to seed the transaction on Steam.</p>
			</div>

			<div class="description detailed hidden">
				<p>Creates a new purchase. Send the order information along with the Steam ID to seed the transaction on Steam.</p>

<p>This command allows you to create a shopping cart of one or more items for a user. The cost and descriptions of these items will be displayed to the user for their approval. The purchase interface can be configured for either the Steam client or a web browser depending on if you are running a purchase in-game or from a web page.
Note that certain currencies must be charged in specific increments. For example, Ukrainian Hryvnia (UAH) must be charged in increments of 100. So if you attempt to price an item at 1050 UAH, InitTxn will fail with error result k_EMicroTxnResultInvalidParam
If you do not wish to price each transaction in the local user's currency, Steam can convert any purchase to the local user's wallet currency automatically based on current exchange rate. For example, if you pass <b>currency</b> as "USD" and <b>amount</b> as "999", a user in Russia will be charged in Rubles at the current exchange rate for $9.99, which would be about 614.90 pуб as of this writing.</p>

<p>Note: If the parameter $sUserSession is set to "web" append the parameter "returnurl=URL_HERE" to the authorization url!</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$iItemCount</var></dt>
						<dd>Number of items in cart.</dd>
						<dt><var>$sLanguage</var></dt>
						<dd>ISO 639-1 language code of the item descriptions.</dd>
						<dt><var>$sCurrency</var></dt>
						<dd>ISO 4217 currency code. See <a href="https://partner.steamgames.com/doc/store/pricing/currencies">Supported Currencies</a> for proper format of each currency.</dd>
						<dt><var>$iItemID</var></dt>
						<dd>3rd party ID for item.</dd>
						<dt><var>$iQuantity</var></dt>
						<dd>Quantity of this item.</dd>
						<dt><var>$iAmount</var></dt>
						<dd>Total cost (in cents) of item(s). See <a href="https://partner.steamgames.com/doc/store/pricing/currencies">Supported Currencies</a> for proper format of each amount. Note that the amount you pass needs to be in the format that matches the "currency" code you pass.</dd>
						<dt><var>$sDescription</var></dt>
						<dd>Description of item</dd>
						<dt><var>$sUserSession</var></dt>
						<dd>(Optional) Session where user will authorize the transaction. Valid options are "client" or "web". If this parameter is not supplied, the interface will be assumed to be through a currently logged in Steam client session.</dd>
						<dt><var>$sIpAddress</var></dt>
						<dd>(Optional) IP address of user in string format (xxx.xxx.xxx.xxx). Only required if $sUserSession is set to web.</dd>
						<dt><var>$sBillingType</var></dt>
						<dd>(Optional) The recurring billing type. "steam", "game" etc.</dd>
						<dt><var>$sStartDate</var></dt>
						<dd>(Optional) The Non UNIX Timestamp when the recurring payment starts</dd>
						<dt><var>$sEndDate</var></dt>
						<dd>(Optional) The Non UNIX Time Stamp when the recurring payment ends</dd>
						<dt><var>$sPeriod</var></dt>
						<dd>(Optional) The period for recurring billing, e.g "month", "year", "week" and "day"</dd>
						<dt><var>$iRecurringAmount</var></dt>
						<dd>(Optional) The recurring billing amount in cents see $iAmount</dd>
						<dt><var>$iFrequency</var></dt>
						<dd>(Optional) The frequency for recurring billing in specified $sPeriod</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code><a href="class-justinback.steam.transactions.html">justinback\steam\transactions</a></code><br>On Success returns the transactions class|On Failure returns an object with the error message
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="ProcessAgreement" id="_ProcessAgreement">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_ProcessAgreement">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#341-367" title="Go to source code">ProcessAgreement</a>( <span>integer <var>$iAmount</var></span>, <span>string <var>$sCurrency</var></span> )</code>

			<div class="description short">
				<p>Initiate a recurring payment (subscription) for the user.
A successful response means that Steam will initiate a billing cycle for the user. It does not mean that the actual billing cycle was completed successfully. Use the GetReport or GetUserAgreementInfo APIs to check actual billing status.</p>
			</div>

			<div class="description detailed hidden">
				<p>Initiate a recurring payment (subscription) for the user.
A successful response means that Steam will initiate a billing cycle for the user. It does not mean that the actual billing cycle was completed successfully. Use the GetReport or GetUserAgreementInfo APIs to check actual billing status.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$iAmount</var></dt>
						<dd>Total cost (in cents). This value corresponds to an initial one-time amount to be immediately charged to a user.</dd>
						<dt><var>$sCurrency</var></dt>
						<dd>ISO 4217 currency code. See <a href="https://partner.steamgames.com/doc/store/pricing/currencies">Supported Currencies</a> for proper format of each currency.</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean<br>On Success returns the transactions class|On Failure returns an object with the error message
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="GetReport" id="_GetReport">

			<td class="attributes"><code>
				 public 
				object[]|transactions[]|player[]
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_GetReport">#</a>
			<code><a href="source-class-justinback.steam.transactions.html#369-415" title="Go to source code">GetReport</a>( <span>string <var>$sTime</var></span>, <span>integer <var>$iMaxResults</var> = <span class="php-num">1000</span></span>, <span>string <var>$sType</var> = <span class="php-quote">&quot;GAMESALES&quot;</span></span>, <span>boolean <var>$bRawOutput</var> = <span class="php-keyword1">false</span></span> )</code>

			<div class="description short">
				<p>Steam offers transaction reports that can be downloaded for reconciliation purposes. These reports show detailed information about each transaction that affects the settlement of funds into your accounts.</p>
			</div>

			<div class="description detailed hidden">
				<p>Steam offers transaction reports that can be downloaded for reconciliation purposes. These reports show detailed information about each transaction that affects the settlement of funds into your accounts.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$sTime</var></dt>
						<dd>Report type (One of: "GAMESALES", "STEAMSTORESALES", "SETTLEMENT")</dd>
						<dt><var>$iMaxResults</var></dt>
						<dd>Maximum number of results to return in report. (Up to 1000)</dd>
						<dt><var>$sType</var></dt>
						<dd>Start time of the report. (RFC 3339 UTC formatted like: 2010-01-01T00:00:00Z)</dd>
						<dt><var>$bRawOutput</var></dt>
						<dd>Return new classes with transaction, player and item management or a raw object</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						object[]|transactions[]|player[]
					</div>




			</div>
			</div></td>
		</tr>
			</table>
		</div>











		<div class="panel panel-default">
            <div class="panel-heading"><h2>Properties summary</h2></div>
			<table class="summary table table-bordered table-striped properties" id="properties">
		<tr data-order="agreementid" id="$agreementid">
			<td class="attributes"><code>
				public  
				
			</code></td>

			<td class="name">
					<a href="source-class-justinback.steam.transactions.html#36-40" title="Go to source code"><var>$agreementid</var></a>

				<div class="description short">
					<p>AgreementID of transaction</p>
				</div>

				<div class="description detailed hidden">
					<p>AgreementID of transaction</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$agreementid" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="transid" id="$transid">
			<td class="attributes"><code>
				public  
				
			</code></td>

			<td class="name">
					<a href="source-class-justinback.steam.transactions.html#42-46" title="Go to source code"><var>$transid</var></a>

				<div class="description short">
					<p>Transaction ID</p>
				</div>

				<div class="description detailed hidden">
					<p>Transaction ID</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$transid" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="orderid" id="$orderid">
			<td class="attributes"><code>
				public  
				
			</code></td>

			<td class="name">
					<a href="source-class-justinback.steam.transactions.html#48-52" title="Go to source code"><var>$orderid</var></a>

				<div class="description short">
					<p>OrderID of transaction</p>
				</div>

				<div class="description detailed hidden">
					<p>OrderID of transaction</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$orderid" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="steamurl" id="$steamurl">
			<td class="attributes"><code>
				public  
				
			</code></td>

			<td class="name">
					<a href="source-class-justinback.steam.transactions.html#54-57" title="Go to source code"><var>$steamurl</var></a>

				<div class="description short">
					<p>The Purchase URL</p>
				</div>

				<div class="description detailed hidden">
					<p>The Purchase URL</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$steamurl" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
			</table>
		</div>






</div>
	</div>

	<div id="footer">
		SteamPHP API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
<script src="resources/combined.js"></script>
<script src="elementlist.js"></script>
</body>
</html>
